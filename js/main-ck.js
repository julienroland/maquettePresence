(function(e){var t=e(".nav"),n="#000",r=["web"],i=e(".day").find(".sceances"),s=e(".overlay"),o=e(".popupCreer"),u=e(".popupModifier"),a=e(".popupSupprimer"),f=e(".popupVoir"),l=e(".popupAjouter"),c=e(".elevesDuCours .eleve"),h=e(".actions"),p=e(".actionsPresence"),d=e(".actionsEleves"),d=e(".actionsEleves"),v=e(".ligneSceances"),m=e(".popupModifierThis"),g=e(".popupSupprimerThis"),y,b,w,E,S=e(".search").find("#search"),x=[],T=[],N=[],C,k;e(function(){U();O();M();_();e.each(e(".mesCours").find(".cours"),function(){var t=e(this).attr("data-type");t==="web"&&e(this).find(".titre > h3").css({color:n})});i&&e.each(i,function(){e(this).parent(".day").find(".number").css({color:"white"})});e(".menuLow").on("click",ot);e(".popupCreerCours .close").on("click","a",ut);e(".popupModifierCours .close").on("click","a",ut);e(".popupSupprimerCours .close").on("click","a",ut);e(".close").on("click","a",ut);e(".delete").on("click",at);e('.helper a[data-link="creer"').on("click",tt);e('.helper a[data-link="modifier"').on("click",nt);e('.helper a[data-link="supprimer"').on("click",rt);e('.helper a[data-link="voir"').on("click",it);e('.helper a[data-link="ajouter"').on("click",st);e("#color").change(function(){console.log(e("#color").val())});s.on("click",Z);e(".helper.voirCours .groupe li").on("click","a",Y);e(".helper.voirCours .presence li").on("click","a",G);e(".sceancesMois li").on("click","a",function(t){t.preventDefault();C=t.pageX;k=t.pageY;var n=e(this).attr("data-sceance");J(n,C,k)});h.on("click","a.modifier",X);h.on("click","a.supprimer",W);p.find(".present").on("click",F);p.find(".justifier").on("click",I);p.find(".absent").on("click",q);p.find(".aucune").on("click",R);e(".elevesDuCours.presenceCours .eleve").on("click","a",Q);e('a[href^="#"]').click(function(){var t=e(this).attr("href");e("html, body").animate({scrollTop:e(t).offset().top},"slow");return!1});S.keydown(function(){setTimeout(function(){var e=S.val();D(e)},50)});e(".eleves li").on("click","a",function(t){t.preventDefault();C=t.pageX;k=t.pageY;var n=e(this).parent().attr("data-slug");J(n,C,k)});e(".listGroupes .groupe").on("click","a",function(t){t.preventDefault();C=t.pageX;k=t.pageY;var n=e(this).attr("data-groupe");J(n,C,k)});e(".elevesGroupe .eleve").on("click","a",function(t){t.preventDefault();C=t.pageX;k=t.pageY;var n=e(this).attr("data-groupe");K(n,C,k)});d.on("click","a.supprimer",W)});var L=function(t){t.preventDefault();e(this).parent().parent().parent().hide();$slug=e(this).attr("data-slug");$that=e('.list .range li[data-slug="'+$slug+'"]');A($that);$that.find(".nom a").focus()},A=function(t){e("html, body").animate({scrollTop:t.offset().top},400)},O=function(){e.each(e(".sceances li"),function(){var t=e(this).attr("data-cours");x[t]&&e(this).css({backgroundColor:x[t]})})},M=function(){e.each(e(".eleves li"),function(){var t=e(this).find(".groupe").attr("data-groupe");if(N[t]){e(this).css({backgroundColor:N[t],color:"white"});e(this).find("span > a").css({color:"white",borderBottom:"1px dotted white",borderTop:0})}})},_=function(){e.each(e(".listGroupes .groupe"),function(){var t=e(this).find(".nom").attr("data-groupe");if(N[t]){e(this).find("a").css({backgroundColor:N[t],color:"white"});e(this).find("span > a").css({color:"white",borderBottom:"1px dotted white",borderTop:0})}})},D=function(t){var t=t.toLowerCase();if(e.type(t)==="string"){B(t);e(".listAutocomplete li").on("click","a",L)}},P=function(t,n){var r=e(".search .listAutocomplete li"),i=!1;if(r.length>0){e.each(r,function(){e(this).find("a").attr("data-slug")===n&&(i=!0)});if(!i){e(".search .autoCompletionEleves").show();e(".search .listAutocomplete").append('<li><a href="voirEleve.php" data-slug="'+n+'" title="Voir la fiche de l\'élève">'+t+"</a></li>")}}else if(!i){e(".search .autoCompletionEleves").show();e(".search .listAutocomplete").append('<li><a href="voirEleve.php" data-slug="'+n+'" title="Voir la fiche de l\'élève">'+t+"</a></li>")}},H=function(t){var n=e(".search .listAutocomplete li");t!=="all"?e.each(n,function(){e(this).find("a").attr("data-slug")===t&&e(this).remove()}):n.remove()},B=function(t){if(t!==""){aData=j();for(var n=0;n<aData.length;n++)if(aData[n].indexOf(t)>=0){var r=aData[n].replace("-"," "),i=r.ucwords();P(i,aData[n])}else H(aData[n])}else{H("all");e(".autoCompletionEleves").hide()}},j=function(){var t=[],n=[],r=[],i=[],s,o,u,a;e.each(e(".range"),function(){e.each(e(".eleves .etudiant"),function(){s=e(this).find(".nom").attr("data-slug");var f=e.inArray(s,t);f<0&&t.push(s);o=e(this).find(".anneeLevel").attr("data-slug");var f=e.inArray(o,n);f<0&&n.push(o);u=e(this).find(".groupe").text();var f=e.inArray(u,r);f<0&&r.push(u);a=e(this).find(".option").text();var f=e.inArray(a,i);f<0&&i.push(a)})});return t},F=function(t){t.preventDefault();if(z(b,y,e(this).attr("data-presence"))){$that=c.find('.nom[data-slug="'+b+'"]');E=e(this).attr("data-presence");$that.css({color:T[E]})}},I=function(t){t.preventDefault();if(z(b,y,e(this).attr("data-presence"))){$that=c.find('.nom[data-slug="'+b+'"]');E=e(this).attr("data-presence");$that.css({color:T[E]})}},q=function(t){t.preventDefault();if(z(b,y,e(this).attr("data-presence"))){$that=c.find('.nom[data-slug="'+b+'"]');E=e(this).attr("data-presence");$that.css({color:T[E]})}},R=function(t){t.preventDefault();if(z(b,y,e(this).attr("data-presence"))){$that=c.find('.nom[data-slug="'+b+'"]');E=e(this).attr("data-presence");$that.css({color:T[E]})}},U=function(){e.ajax({async:!1,url:"config.json",success:function(e){var t=e.color.cours,n=e.color.presence,r=e.color.groupe;for(var i=0;i<=t.length-1;i++)x[t[i].cours]=t[i].color;for(var i=0;i<=n.length-1;i++)T[n[i].presence]=n[i].color;for(var i=0;i<=r.length-1;i++)N[r[i].groupe]=r[i].color}})},z=function(e,t,n){return!0},W=function(e){e.preventDefault();C=e.pageX;k=e.pageY;g.css({top:k+125,left:130}).fadeIn();et(g);m.hide()},X=function(e){e.preventDefault();C=e.pageX;k=e.pageY;m.css({top:k+125,left:0}).fadeIn();et(m);g.hide()},V=function(t){t.preventDefault();C=t.pageX;k=t.pageY;e(".popupSupprimerEleves").css({top:k+125,left:130}).fadeIn();et(g);m.hide()},$=function(t){t.preventDefault();C=t.pageX;k=t.pageY;e(".popupModifierEleves").css({top:k+125,left:0}).fadeIn();et(m);g.hide()},J=function(e,t,n){h.attr("data-id",e);h.css({top:n+25,left:t-100}).fadeIn("fast")},K=function(e,t,n){d.attr("data-id",e);d.css({top:n+25,left:t-100}).fadeIn("fast")},Q=function(t){t.preventDefault();C=t.pageX;k=t.pageY;b=e(this).find(".nom").attr("data-slug");w=e(this).find(".groupe").attr("data-groupe");y=Number(e(".gererMaSceance").attr("data-sceance"));p.css({top:k+50,left:C}).fadeIn("fast")},G=function(t){t.preventDefault();if(e(this).attr("data-link")==="presence"){e(this).attr("data-link","image");e(this).html("Revoir les photos");e(".presenceGroupe").fadeIn();e.each(c,function(){e(this).find("img").hide();e(this).find(".percent span").html("70%");e(this).find(".percent").show()})}else{e(this).attr("data-link","presence");e(this).html("Voir les présences");e(".presenceGroupe").fadeOut();e.each(c,function(){e(this).find(".percent").hide();e(this).find("img").show()})}},Y=function(t){t.preventDefault();e(".helper.voirCours .groupe li.active").removeClass("active");e(this).parent().addClass("active");e(".helper.voirCours .presence li > a").attr("data-groupe",e(this).attr("data-groupe"));if(e(this).attr("data-link")==="tri")if(e(this).attr("data-groupe")!=="all"){var n=e(this).attr("data-groupe"),r=e(this);e.each(c,function(){e(this).find(".groupe").attr("data-groupe")!==n?e(this).fadeOut():e(this).fadeIn()})}else e.each(c,function(){e(this).fadeIn()})},Z=function(e){e.preventDefault();s.fadeOut();h.fadeOut();p.fadeOut();d.fadeOut();m.fadeOut();g.fadeOut();o.fadeOut();u.fadeOut();a.fadeOut();f.fadeOut();l.fadeOut()},et=function(t){e("html, body").animate({scrollTop:t.offset().top},800,function(){s.css({height:e(window).height(),width:e(window).width(),display:"block"})})},tt=function(e){e.preventDefault();o.fadeIn();et(o);u.hide();a.hide();f.hide();l.hide()},nt=function(e){e.preventDefault();u.fadeIn();et(u);o.hide();a.hide();f.hide();l.hide()},rt=function(e){e.preventDefault();a.fadeIn();et(a);u.hide();o.hide();f.hide();l.hide()},it=function(e){e.preventDefault();f.fadeIn();et(f);u.hide();a.hide();o.hide();l.hide()},st=function(e){e.preventDefault();l.fadeIn();et(l);u.hide();a.hide();o.hide();f.hide()},ot=function(t){t.preventDefault();var n=e(this).parent(".wrapper").find(".menu");n.slideToggle().css({boxShadow:"rgba(0,0,0,0.4) 0 3px 3px 0","-webkit-boxShadow":"rgba(0,0,0,0.4) 0 3px 3px 0",backgroundColor:"#5097bd"})},ut=function(t){t.preventDefault();e(this).parent().parent().fadeOut("fast");s.fadeOut();h.fadeOut()},at=function(t){t.preventDefault();e(this).parent().fadeOut()};String.prototype.ucwords=function(){var e=this.split(" "),t=0,n=e.length;for(;t<n;t++)e[t]=e[t].charAt(0).toUpperCase()+e[t].slice(1);return e.join(" ")}}).call(this,jQuery);